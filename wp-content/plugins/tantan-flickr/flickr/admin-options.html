<?php
global $Silas;?>

<?php if ($error):?>
<div id="message" class="error fade"><p><strong><?php echo $error?></strong></p></div>
<?php elseif ($message):?>
<div id="message" class="updated fade"><p><strong><?php echo $message?></strong></p></div>
<?php endif;?>

<style>
fieldset.options {
    clear:both;
    border:1px solid #ccc;
}
fieldset.options legend {
    font-family: Georgia,"Times New Roman",Times,serif;
    font-size: 22px;
}

div.album {
    float:left;
    width:200px;
    height:150px;
    margin-right:15px;
}
div.album td {
    font-size:0.9em;
}
div.album-hidden img {
    opacity:0.5;
}
div.album td strong {
	display:block;
	max-height:2.5em;
	overflow:hidden;
}
</style>


<div class="wrap">
<h2 id="write-post">Photo Album Configuration</h2>
<div style="float:left;margin-right:270px">
<p>
This plugin will retrieve your Flickr photosets and display them as albums on a page within this site. 
This plugin will also allow you to easily add your photos to your blog posts (or pages). 
</p>
<?php if (!is_object($Silas)):?>
<p>
This plugin is provided by <a href="http://www.tantannoodles.com">TanTanNoodles</a> 
and licensed free of charge for you to use under the GPL.
This plugin is <em>unsupported</em> and comes with no official technical support.
However, you can check the following pages for the latest updates to this plugin, along with any unofficial technical support:<br>
<br>
<strong>Releases:</strong> <a href="http://tantannoodles.com/toolkit/photo-album/">tantannoodles.com/toolkit/photo-album/</a><br>
<strong>Support Group:</strong> <a href="http://www.flickr.com/groups/tantannoodles/">flickr.com/groups/tantannoodles</a>
</p>
<p>
<strong>RSS Updates:</strong> Subscribe to the <a href="http://feeds.feedburner.com/TanTanToolkit">TanTanToolkit feed</a> and get notified when there's an update to this plugin.
</p>
<?php endif;?>
</div>

<div  style="float:right;width:250px;margin:10px 0 0 -270px;background:#eee;padding:10px;font-size:0.9em;">
	If you find this plugin helpful, please consider donating a few dollars to support this plugin. Thanks!
	<br /><br />
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_donations" />
<input type="hidden" name="business" value="joetan54@gmail.com" />
<input type="hidden" name="item_name" value="TanTanNoodles Plugin Donation" />
<input type="hidden" name="item_number" value="Flickr Photo Album" />
<input type="hidden" name="page_style" value="Primary" />

<input type="hidden" name="no_shipping" value="1" />
<input type="hidden" name="return" value="http://tantannoodles.com/donation-thankyou/" />
<input type="hidden" name="cancel_return" value="http://tantannoodles.com/" />
<input type="hidden" name="currency_code" value="USD" />
<input type="hidden" name="tax" value="0" />
<input type="hidden" name="cn" value="Message / Note" />
<input type="hidden" name="lc" value="US" />
<input type="hidden" name="bn" value="PP-DonationsBF" />
<div style="float:left;width:150px;padding-top:10px">
Amount: $<input type="text" name="amount" value="" style="width:50px;" /> <br />
</div>
<div style="float:right;width:100px">
<input type="image" src="https://www.paypal.com/en_US/i/btn/x-click-butcc-donate.gif" border="0" name="submit" alt="Make payments with PayPal - it's fast, free and secure!" />
</div>
<img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" style="clear:both;" />
</form>

</div>



<?php 
if (!$flickr_apikey || !$flickr_sharedsecret) { // no api key
    include(dirname(__FILE__).'/admin-options-apikey.html');
}elseif (!$flickrAuth) { // authenticate
    include(dirname(__FILE__).'/admin-options-auth.html');
} else { // general flickr settings
?>
	<fieldset class="options">
    <legend>Customizations</legend>
    <p>
    	<strong>Popup Overlays:</strong> Add Lightbox style popup overlays to displays to your photos. <a href="http://tantannoodles.com/flickr-demo/">Demo</a> - <a href="http://code.google.com/p/photo-album/wiki/Documentation#Popup_Overlay_Support">Instructions</a>
	</p>
	<p>
		<strong>Custom Comments:</strong> Allow visitors to comment on the photos displayed on your blog (without having to register with Flickr). <a href="http://code.google.com/p/photo-album/wiki/Documentation#Custom_Photo_Comments">Instructions</a>
	</p>
    <p>
    	<strong>Look and Feel:</strong> Not all WordPress themes are created equal, and you may need to tweak a couple templates to match the look and feel of our own blog. Look inside the <code>wp-content/plugins/tantan-flickr/templates</code> directory for the template files. <a href="http://code.google.com/p/photo-album/wiki/Documentation#Look_and_Feel_Customization">Instructions</a>
    </p>
    </fieldset>
    

<?php include(dirname(__FILE__).'/admin-options-flickrsettings.html'); ?>
    

    
    <fieldset class="options">
    <legend>Photo Albums</legend>
    
    <form method="post">
    <input type="hidden" name="action" value="clearcache" />
    <input type="hidden" name="album" value="all" />
    
    <input type="button" value="Organize Albums" onclick="window.open('http://www.flickr.com/photos/organize/?start_tab=sets', '_blank');return false" />
    <input type="submit" value="Refresh All Albums" /><br>
    <small>Your Flickr albums will be cached locally to help speed things up. Click <strong>refresh</strong> to synchronize and refresh all your albums, or after you've created a new set.</small>
    </form>
    
    <hr />
    <form method="post">
    <input type="hidden" name="action" value="savealbumsettings" />
    <div id="options-albums">Please wait. Now loading your albums...</div>
    <p class="submit" style="clear:both;"><input type="submit" value="save settings &gt;" /></p>
    </form>
   
    </fieldset>
    
    <fieldset class="options">
    <legend>Group Photos</legend>
    <form method="post">
<?php if (TANTAN_FLICKR_DISPLAYGROUPS): ?>
    <input type="hidden" name="action" value="cleargroupcache" />
    <input type="hidden" name="group" value="all" />
    
    <input type="button" value="Organize Groups" onclick="window.open('http://flickr.com/photos/organize/?start_tab=groups', '_blank');return false;" />
    <input type="submit" value="Refresh All Groups" /><br>
    <small>Your Flickr groups will be cached locally to help speed things up.
    Click <strong>refresh</strong> to synchronize and refresh all your groups.</small>
    <hr />
    </form>
    
    <form method="post">
    <input type="hidden" name="action" value="savegroupsettings" />

    <div id="options-groups">Please wait. Now loading your groups...</div>
    
    <a href="#" onclick="return hideAllGroups()">toggle group hiding</a>
    <p class="submit" style="clear:both;">
    <input type="submit" value="save settings &gt;" />
    </p>
    <script>
    function hideAllGroups() {
        var inputs = document.getElementsByTagName('input')
        for (var i=0; i<inputs.length; i++) {
            if (inputs[i].name == 'hideGroup[]') {
                inputs[i].checked = !inputs[i].checked
            }
        }
        return false
    }
    </script>
<?php else:?>
	Support for groups are not enabled. <a href="http://code.google.com/p/photo-album/wiki/GroupsSupport">Please see this page for instructions on how to configure the plugin to display photos from groups.</a>
<?php endif; ?>
    </form>
    
    </fieldset>
    
    
    <script type="text/javascript" src="../wp-includes/js/tw-sack.js"></script>
    <script>
    function getOptions(what) {
        var ajaxUpdate = new sack();
        ajaxUpdate._tantan_what = what
        ajaxUpdate.requestFile = "../wp-content/plugins/tantan-flickr/flickr/admin-options-load.php"
        ajaxUpdate.method = 'GET';
        ajaxUpdate.onLoading = function() {}
        ajaxUpdate.onLoaded = function() {}
        ajaxUpdate.onInteractive = function() {}
        ajaxUpdate.onCompletion = function() {
            var options = document.getElementById('options-'+this._tantan_what);
            options.innerHTML = this.response
        }
        ajaxUpdate.runAJAX('view='+what);
    }
    getOptions('albums');
    getOptions('groups');
    
    
    </script>
            	    
    <?php
} //flickr auth
?>



</div>